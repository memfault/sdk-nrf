#
# Copyright (c) 2024 Nordic Semiconductor
#
# SPDX-License-Identifier: LicenseRef-Nordic-5-Clause
#

config SETTINGS
	default y

config ZMS
	default y if (SOC_FLASH_NRF_RRAM || SOC_FLASH_NRF_MRAM)

config NVS
	default y if !(SOC_FLASH_NRF_RRAM || SOC_FLASH_NRF_MRAM)

### Memfault Device Identification settings ###
#
# There are 3 places device identification is used:
#
# | Field             | Memfault (NCS)          | Bluetooth DIS            | MCUboot                      |
# |-------------------|-------------------------|--------------------------|------------------------------|
# | .software_version | MEMFAULT_NCS_FW_VERSION | BT_DIS_FW_REV_STR        | MCUBOOT_IMGTOOL_SIGN_VERSION |
# | .software_type    | MEMFAULT_NCS_FW_TYPE    | BT_DIS_SW_REV_STR        | N/A                          |
# | .hardware_version | MEMFAULT_NCS_HW_VERSION | BT_DIS_HW_REV_STR        | N/A                          |
# | .device_serial    | MEMFAULT_NCS_DEVICE_ID  | BT_DIS_SERIAL_NUMBER_STR | N/A                          |
#
# How each is used:
# - Memfault uses these values to tag telemetry data sent to the Memfault cloud.
# - The Bluetooth Device Information Service (DIS) exposes these values over
#   BLE. These are used by the nRF Connect Device Manager app to execute FOTA
#   with nRF Cloud (Memfault). These values are required when performing the
#   FOTA requests.
# - MCUboot contains the .software_version in the image header, mostly used for
#   informational purposes.
#
# We use this Kconfig override file to set all 3 places simultaneously to ensure
# consistency.

# .software_version
config MEMFAULT_NCS_FW_VERSION
	# The MEMFAULT_BUILTIN_DEVICE_INFO_SOFTWARE_VERSION default uses the VERSION
	# file for the software version value
	default MEMFAULT_BUILTIN_DEVICE_INFO_SOFTWARE_VERSION
config MCUBOOT_IMGTOOL_SIGN_VERSION
	default MEMFAULT_NCS_FW_VERSION
config BT_DIS_FW_REV_STR
	default MEMFAULT_NCS_FW_VERSION

# .software_type
config MEMFAULT_NCS_FW_TYPE
	# Defaults to "app"
	default MEMFAULT_BUILTIN_DEVICE_INFO_SOFTWARE_TYPE
config BT_DIS_SW_REV_STR
	default MEMFAULT_NCS_FW_TYPE

# .hardware_version
config BT_DIS_HW_REV_STR
	default BOARD

# .device_serial
config MEMFAULT_NCS_DEVICE_ID
	default "mfltqs1"
config BT_DIS_SERIAL_NUMBER_STR
	default MEMFAULT_NCS_DEVICE_ID

source "Kconfig.zephyr"
